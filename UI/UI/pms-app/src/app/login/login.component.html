<div class="login-container">
  <div class="login-box">
    <div class="login-header">
      <div class="logo">{{ i18n.icon('reservation') }}</div>
      <h1>{{ i18n.t('login.title') }}</h1>
      <p class="subtitle">{{ i18n.t('login.subtitle') }}</p>
    </div>

    <form #loginForm="ngForm" (ngSubmit)="login()" class="login-form">
      @if (errorMessage()) {
        <div class="error-alert">
          ‚ö†Ô∏è {{ errorMessage() }}
        </div>
      }

      <div class="form-group">
        <label for="username">
          <span class="icon">{{ i18n.icon('guest') }}</span>
          {{ i18n.t('login.username') }}
        </label>
        <input 
          #usernameInput
          type="text" 
          id="username" 
          name="username"
          [(ngModel)]="username"
          (keypress)="onKeyPress($event)"
          placeholder="Enter your username"
          [disabled]="loading()"
          required
          autofocus
        />
      </div>

      <div class="form-group">
        <label for="password">
          <span class="icon">üîí</span>
          {{ i18n.t('login.password') }}
        </label>
        <input 
          #passwordInput
          type="password" 
          id="password" 
          name="password"
          [(ngModel)]="password"
          (keypress)="onKeyPress($event)"
          placeholder="Enter your password"
          [disabled]="loading()"
          required
        />
      </div>

      <button 
        type="submit" 
        class="btn-login"
        [disabled]="loading() || !username() || !password() || azureLoading()"
      >
        @if (loading()) {
          <span class="spinner">‚è≥</span>
          {{ i18n.t('common.loading') }}
        } @else {
          {{ i18n.t('login.loginButton') }}
        }
      </button>

      <div class="divider">
        <span>or</span>
      </div>

      <button 
        type="button" 
        class="btn-azure"
        (click)="loginWithAzureAd()"
        [disabled]="loading() || azureLoading()"
      >
        @if (azureLoading()) {
          <span class="spinner">‚è≥</span>
          Signing in with Microsoft...
        } @else {
          <svg class="microsoft-logo" width="21" height="21" viewBox="0 0 21 21" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="10" height="10" fill="#F25022"/>
            <rect x="11" width="10" height="10" fill="#7FBA00"/>
            <rect y="11" width="10" height="10" fill="#00A4EF"/>
            <rect x="11" y="11" width="10" height="10" fill="#FFB900"/>
          </svg>
          Sign in with Microsoft
        }
      </button>
    </form>

    <div class="login-footer">
      <div class="info-message">
        <p>üîë <strong>Default Login Credentials:</strong></p>
        <div class="credentials-grid">
          <div class="credential-item">
            <span class="credential-label">Admin:</span>
            <span class="credential-value"><code>admin</code> / <code>admin123</code></span>
          </div>
          <div class="credential-item">
            <span class="credential-label">Support:</span>
            <span class="credential-value"><code>support</code> / <code>support123</code></span>
          </div>
        </div>
        <p style="margin-top: 1rem; font-size: 0.85rem; opacity: 0.9;">
          Both accounts have full system access. You can create additional users with different roles from the Users page.
        </p>
      </div>
      <p class="copyright">
        &copy; 2025 Property Management System
      </p>
    </div>
  </div>
</div>
